<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title >Your Market</title>
    <link rel="stylesheet" href="https://unpkg.com/flickity@2/dist/flickity.min.css">
    <script src="https://kit.fontawesome.com/b65380c159.js" crossorigin="anonymous"></script>
    <style>
        body {
            background-color: #f3f3f3;
        }
        nav {
            display: flex;
            width: 100%;
            justify-content: space-around;
            height: 75px;
            position: fixed;
            top: 0;
            right: 0;
            left: 0;
            background-color: white;
        }
        #logo {
            margin-left: 50px;
        }
        #logo > a > img {
            width: 32%;
        }
        #search > input {
            height: 25px;
        }
        #search > button {
            height: 30px;
            width: 40px;
        }
        #basket2 {
            display: flex;
        }
        #basket2 > div {
            text-align: right;
        }
        #basket2 > div:nth-child(2) {
            width: 50px;
        }
        nav img {
            width: 20%;
        }
        #search {
            width: 100%;
            height: 30px;
            width: 100%;
        }
        #search > input {
            width: 80%;
        }
        #cartshow {
            margin-top: 100px;
            width: 100%;
        }
        #fortotal {
            width: 520px;
            height: 275px;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            border-radius: 5px;
            margin-right: 0px;
            box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
        }
        #fortotal > div {
            height: 100px;
        }
        #a3 {
            grid-column-start: 3;
            grid-column-end: 4;
            grid-row-start: 1;
            grid-row-end: 3;
        }
        #a6 {
            grid-column-start: 1;
            grid-column-end: 4;
            grid-row-start: 3;
            grid-row-end: 4;
        }
        #a2, #a5 {
            text-align: right;
        }
        #a3 {
            text-align: center;
        }
        #a6 {
            text-align: right;
        }
        #a6 > button {
            height: 50px;
            width: 180px;
            font-size: 25px;
            text-align: center;
            border-radius: 5px;
            background-color: #fce17b;
            border: none;
            box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;
        }
        #a6 > button:hover {
            background-color: yellow;
            cursor: pointer;
            border: 0.25px solid gray;
        }

        #about {
            margin: auto;
            border: 1px solid grey;
            padding: 10px;
            margin-top: 30px;
        }
        #green {
            color: #81C784;
            font-weight: bold;
        }
        .black {
            color: black;
            font-size: 30px;
            text-align: left;
            margin-top: 20px;
            margin-bottom: 0px;
        }
        .left {
            text-align: left;
            color: grey;
        }
        img {
            width: 100%;
        }
        div {
            width: 90%;
            margin: auto;
        }
        div > img {
            border: 0.25px solid #E0E0E0;
        }
        h2 {
            font-size: 24px;
            text-align: center;
            color: rgb(68, 68, 68);
        }
        #below2 {
            width: 100%;
            margin-top: 30px;
            margin-bottom: 30px;
            margin-right: 20px;
        }
        table {
            width: 80%;
            margin-left: 10%;
        }
        .companyvalue {
            color: grey;
            font-size: 12px;
        }
        .namevalue {
            font-size: 16px;
            margin-top: 0px;
            padding-top: 0px;
        }
        .price2value {
            font-size: 16px;
            text-align: right;
        }
        .price1value {
            font-size: 12px;
            text-decoration: line-through;
            color: grey;
            text-align: right;
        }
        .quantityvalue {
            text-align: center;
        }
        
        #th1 {
            width: 40%;
        }
        #th2 {
            width: 5%
        }
        #th3 {
            width: 15%;
        }
        #th4 {
            width: 10%;
        }
        #th5 {
            width: 10%;
        }
        #th6 {
            width: 10%;
        }
        td {
            text-align: left;
        }
        td > img {
            width: 5%;
        }
        .tdgreen {
            color: #81C784;
            width: 20%;
        }


    </style>
</head>
<body>
    <nav>
        <div id="logo">
            <a href="./index.html"><img src="\pics\YourMarket.png" alt=""></a>
        </div>
        <div id="search">
            <input id="input" type="text" placeholder="Search for Products...">
            <button id="searchbtn"><i class="fa-solid fa-magnifying-glass"></i></button>
        </div>
        <div id="basket">
            <div id="basket2">
                <div>
                    <img style="width: 10%;" src="\pics\cart.jpg" alt="">
                </div>
                <div>
                    <a href=""><span id="cart">0</span><span> items</span></a>
                </div>
            </div>
        </div>
    </nav>
    <div id="cartshow">
        <p>Your Basket ( <span id="cart2"></span> items) </p>
        <table>
            <thead>
                <tr>
                    <th id="th1">ITEM DESCRIPTION</th>
                    <th id="th2">UNIT PRICE</th>
                    <th id="th3">QUANTITY</th>
                    <th id="th4">SUBTOTAL</th>
                    <th id="th5"> </th>
                    <th id="th6">SAVINGS</th>
                </tr>
            </thead>
            <tbody>
                <!-- Append data here -->
            </tbody>
        </table>
        <div id="fortotal">
            <div id="a1"></div>
            <div id="a2"></div>
            <div id="a3"></div>
            <div id="a4"></div>
            <div id="a5"></div>
            <div id="a6"></div>
        </div>
    </div>
    <div id="below2">
        <table>
            <tbody>
                <tr>
                    <td class="tdgreen">POPULAR CATEGORIES:</td>
                    <td>Sunflower Oils, Wheat Atta, Ghee, Milk, Health Drinks, Flakes, Organic F&V, Namkeen, Eggs, Floor Cleaners, Other Juices, Leafy Vegetables, Frozen Veg Food, Diapers & Wipes.</td>
                </tr>
                <tr>
                    <td class="tdgreen">POPULAR BRANDS:</td>
                    <td>Amul, Nescafe, MTR, RED BULL, elite cake, Pediasure, Yummiez, Yera, Yakult, Britannia, Wow Momo, Fortune, Haldirams, Ferrero, Lays, Patanjali, McCain, kwality walls, Cadbury Dairy Milk, Pedigree.</td>
                </tr>
                <tr>
                    <td class="tdgreen">CITIES WE SERVE:</td>
                    <td>Bangalore, Hyderabad, Mumbai, Pune, Chennai, Delhi, Mysore, Madurai, Coimbatore, Vijayawada-Guntur, Kolkata, Ahmedabad-Gandhinagar, Nashik Business, Lucknow-Kanpur, Gurgaon, Vadodara, Visakhapatnam, Surat, Nagpur, Patna, Indore, Chandigarh Tricity, Jaipur, Bhopal, Noida-Ghaziabad, Kochi, Krishna District, Bhubaneshwar-Cuttack, Guwahati, Renigunta, Hubli, Davanagere, Trichy, Amravati, Raipur, Rajkot, Gwalior, Bareilly, Allahabad, Hyderabad Rural, Bangalore Rural, Chennai Rural, Vizag Rural, Lucknow Rural, Noida Rural, Ahmedabad Rural, Bhopal Rural, Bhubaneswar Rural, Coimbatore Rural, Chandigarh Rural, Gurugram Rural, Guwahati Rural, Indore Rural, Kochi Rural, Kolkata Rural, Mumbai Rural, Mysore Rural, Nagpur Rural, Patna Rural, Pune Rural, Surat Rural, Vadodara Rural, Jaipur Rural, Ranchi, Nashik, Agra, Kozhikode.</td>
                </tr>
                <tr>
                    <td class="tdgreen">PAYMENT OPTIONS:</td>
                    <td>
                        <img src="https://cdn.shopify.com/s/files/1/0353/8056/0012/files/payment_cod.svg?v=1663912907" alt="">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/6/6a/Visa-europe-logo.gif" alt="">
                        <img src="https://img.etimg.com/thumb/msid-92061657,width-300,imgsize-10384,,resizemode-4,quality-100/axis-bank-and-indian-oil-launch-co-branded-rupay-contactless-credit-card.jpg" alt="">
                        <img src="https://i0.wp.com/www.mobileworldlive.com/wp-content/uploads/2013/06/300px-MasterCard_Logo.png?w=300&ssl=1" alt="">
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</body>
<script>
    let cart = JSON.parse(localStorage.getItem("cartdata"));
    let cartvalue = document.getElementById("cart");
    let cartvalue2 = document.getElementById("cart2");
    let tbody = document.querySelector("tbody");
    let cartshow = document.getElementById("cartshow");
    let a1 = document.getElementById("a1");
    let a2 = document.getElementById("a2");
    let a3 = document.getElementById("a3");
    let a4 = document.getElementById("a4");
    let a5 = document.getElementById("a5");
    let a6 = document.getElementById("a6");
    let fortotal = document.getElementById("fortotal");

    
    display(cart);
    cartshowing(cart);

    function cartshowing (cart) {
        a1.innerHTML = null;
        a2.innerHTML = null;
        a3.innerHTML = null;
        a4.innerHTML = null;
        a5.innerHTML = null;
        a6.innerHTML = null;
        let a21data = 0;
        let a32data = 0;
        cart.forEach((element,index)=>{
            a21data += element.price2 * element.quantity;
            a32data += ((element.price1-element.price2) * element.quantity);
        })
        let a11 = document.createElement("p");
        let a12 = document.createElement("p");
        a11.innerText = "Subtotal :";
        a12.innerText = "Delivery Charges :";
        a1.append(a11,a12);
        let a21 = document.createElement("p");
        let a22 = document.createElement("p");
        a21.innerText = "Rs. "+ a21data;
        a22.innerText = "Free";
        a2.append(a21,a22);
        let a31 = document.createElement("p");
        a31.innerText = "You saved!";
        let a32 = document.createElement("h3");
        a32.innerText = "Rs. "+ a32data.toFixed(2);
        a3.append(a31,a32);
        let a41 = document.createElement("h1");
        a41.innerText = "TOTAL";
        a4.append(a41);
        let a51 = document.createElement("h1");
        a51.innerText = "Rs. "+ a21data;
        a5.append(a51);
        let a61 = document.createElement("button");
        a61.innerText = "CHECKOUT";
        a6.append(a61);
    }

    function display (data) {
        cartvalue.innerText = 0;
        cartvalue2.innerText = 0;
        tbody.innerHTML = null;
        data.forEach((element,index) => {
            cartvalue.innerText = data.length;
            cartvalue2.innerText = data.length;
            let tr = document.createElement("tr");
            let item = document.createElement("td");
            let company = document.createElement("p");
            company.setAttribute("class", "companyvalue");
            company.innerText = element.company;
            let name = document.createElement("p");
            name.setAttribute("class", "namevalue")
            name.innerText = element.name;
            item.append(company, name);
            let price = document.createElement("td");
            let price2 = document.createElement("p");
            price2.setAttribute("class", "price2value");
            price2.innerText = "Rs. " + element.price2;
            let price1 = document.createElement("p");
            price1.setAttribute("class", "price1value");
            price1.innerText = "Rs. " + element.price1;
            price.append(price2,price1);
            let decrease = document.createElement("button");
            decrease.innerText = "-";
            let increase = document.createElement("button");
            increase.innerText = "+";
            let quantitydata = document.createElement("td");
            quantitydata.setAttribute("class", "quantityvalue")
            let quantity = document.createElement("span");
            quantity.innerText = " "+element.quantity+" ";
            quantitydata.append(decrease,quantity,increase);
            let subtotal = document.createElement("td");
            subtotal.innerText = (element.price2 * element.quantity);
            let dlt = document.createElement("button");
            dlt.innerText = "Delete";
            let savings = document.createElement("td");
            savings.innerText = ((element.price1 - element.price2)*element.quantity).toFixed(2);
            decrease.addEventListener("click", ()=>{
            if(quantity.innerText > 1) {
                data[index].quantity -= 1;
                localStorage.setItem("cartdata", JSON.stringify(data));
                display(data);
                cartshowing(data);
            }
            });
            increase.addEventListener("click", ()=>{
                data[index].quantity += 1;
                localStorage.setItem("cartdata", JSON.stringify(data));
                display(data);
                cartshowing(data);
            });
            dlt.addEventListener("click", ()=>{
                let data = JSON.parse(localStorage.getItem("cartdata"));
                data.splice(index,1);
                localStorage.setItem("cartdata", JSON.stringify(data));
                display(data);
                cartshowing(data);
            })

            tr.append(item,price,quantitydata,subtotal,dlt,savings);
            tbody.append(tr);
        });
    }
  
</script>
</html>